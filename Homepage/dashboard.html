<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<title>ğŸ¦ Credibe - Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&amp;display=swap" rel="stylesheet"/>
<link href="../favicon.png" rel="icon" type="image/png"/>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script defer="" src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.7.0/dist/vanilla-tilt.min.js"></script>
<script src="https://js.stripe.com/v3/"></script>
<style>
    body {
        font-family: 'Poppins', sans-serif;
    }

    .skeleton {
        animation: pulse 1.5s infinite ease-in-out;
        background-color: #2d2d2d;
        height: 1.5rem;
        border-radius: 0.25rem;
    }

    .chart-container {
        animation: fadeIn 1s ease-in-out;
    }

    @keyframes pulse {
        0% { opacity: 1; }
        50% { opacity: 0.5; }
        100% { opacity: 1; }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    .mobile-menu {
        transition: transform 0.3s ease-in-out;
    }

    .mobile-menu.open {
        transform: translateX(0);
    }

    .mobile-menu.closed {
        transform: translateX(-100%);
    }

    .fade-in {
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.6s ease, transform 0.6s ease;
    }

    .fade-in.visible {
        opacity: 1;
        transform: translateY(0);
    }

    .gradient-border {
        border: 2px solid transparent;
        background: linear-gradient(45deg, #00b4d8, #00d4ff, #00b4d8) border-box;
        background-size: 200%;
        animation: gradientShift 3s ease infinite;
    }

    .gradient-border:hover {
        background: linear-gradient(45deg, #00d4ff, #00b4d8, #00d4ff) border-box;
    }

    @keyframes gradientShift {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
    }

    .map-path { 
        fill: #2d2d2d; 
    }

    input:focus + span, select:focus + span { 
        opacity: 1 !important; 
    }

    /* Header Enhancements */
    .header {
        transition: background-color 0.3s ease;
    }

    .header:hover {
        background-color: #3a3a3a;
    }

    .greeting {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        transition: transform 0.3s ease, opacity 0.3s ease;
    }

    .greeting:hover {
        transform: scale(1.05);
        opacity: 0.9;
    }

    /* Mobile Greeting (Simplified) */
    @media (max-width: 767px) {
        .header .greeting {
            display: none;
        }
        .header::after {
            content: "ğŸ‘‹ Member";
            display: block;
            text-align: center;
            font-size: 0.9rem;
            color: #bbb;
            padding-top: 0.5rem;
        }
    }

    /* Fade-in animation for secondary actions and spending overview */
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fade-in {
    animation: fadeIn 0.5s ease-out forwards;
}
/* Ensure gradient-border remains consistent */
.gradient-border {
    position: relative;
    z-index: 1;
}
.gradient-border::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    border-radius: inherit;
    background: linear-gradient(45deg, #00b4d8, #00d4ff);
    z-index: -1;
}
</style>
</head>
<body class="bg-[#1a1a1a] text-[#e0e0e0] min-h-screen flex flex-col overflow-x-hidden">
<!-- Header with Credibe Logo Right, Menu Left -->
<header class="bg-[#2d2d2d] p-3 sm:p-6 flex items-center justify-between sticky top-0 z-50 w-full shadow-md">
<!-- ğŸ” Hamburger Left -->
<button class="text-white text-2xl md:hidden focus:outline-none" id="menu-toggle">
    â˜°
  </button>
<!-- ğŸ¦ Logo + Text Right -->
<div class="flex items-center space-x-4 ml-auto">
<a class="flex items-center space-x-2" href="index.html">
<img class="h-8 w-8 rounded-full object-contain bg-white p-[2px]" src="credibe.png"/>
<span class="text-2xl sm:text-3xl font-bold text-[#00b4d8]">Credibe</span>
</a>
<div class="hidden sm:flex items-center space-x-2">
<span class="text-white text-base sm:text-lg font-medium bg-[#1e1f2a] px-3 py-1 rounded-full">
        ğŸ‘‹ Welcome back
      </span>
</div>
</div>
</header>
<!-- Main Layout -->
<div class="flex flex-1 w-full">
<!-- Sidebar Navigation (PC Only) -->
<aside class="fixed top-[4rem] left-0 h-[calc(100vh-4rem)] bg-[#2d2d2d] w-64 p-2 sm:p-4 space-y-2 hidden md:block z-30">
<nav>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="dashboard" href="#">ğŸ  Dashboard</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="accounts" href="#">ğŸ’³ Accounts</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="transfers" href="#">ğŸ’¸ Transfers</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="transactions" href="#">ğŸ“„ Transactions</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="analytics" href="#">ğŸ“Š Analytics</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="security" href="#">ğŸ”’ Security</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="settings" href="#">âš™ï¸ Settings</a>
</nav>
</aside>
<!-- Mobile Menu -->
<nav class="fixed top-[4rem] left-0 w-64 bg-[#2d2d2d] h-full p-2 space-y-2 transform transition-transform duration-300 ease-in-out md:hidden z-40 mobile-menu closed" id="mobile-menu">
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="dashboard" href="#">ğŸ  Dashboard</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="accounts" href="#">ğŸ’³ Accounts</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="transfers" href="#">ğŸ’¸ Transfers</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="transactions" href="#">ğŸ“„ Transactions</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="analytics" href="#">ğŸ“Š Analytics</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="security" href="#">ğŸ”’ Security</a>
<a class="nav-link block p-1 sm:p-2 rounded-lg hover:bg-[#3a3a3a] hover:text-[#00b4d8] transition duration-300 ease-in-out flex items-center gap-1 sm:gap-2 text-sm sm:text-base" data-page="settings" href="#">âš™ï¸ Settings</a>
</nav>
<!-- Main Content Area -->
<main class="flex-1 p-2 sm:p-4 w-full md:ml-64">
<!-- Dashboard Page -->
<div class="page" id="dashboard-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Dashboard</h1>
<div class="space-y-2 sm:space-y-4" x-data="{ loading: false }">
<!-- Skeleton Loader -->
<div class="grid grid-cols-1 gap-2 sm:gap-4" x-show="loading">
<div class="skeleton h-16 sm:h-24"></div>
<div class="skeleton h-16 sm:h-24"></div>
<div class="skeleton h-16 sm:h-24"></div>
</div>
<!-- Balance Cards -->
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-4" x-show="!loading">
<!-- Total Balance -->
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md hover:scale-105 transition duration-300 ease-in-out">
<a aria-label="View Total Balance" class="block flex flex-col" href="add-money.html">
<h3 class="text-[#e0e0e0] font-semibold mt-1 sm:mt-2 text-sm sm:text-base">TOTAL BALANCE</h3>
<p class="text-[#00b4d8] text-base sm:text-xl" id="totalBalance">â‚¬0.00</p>
</a>
</div>
<!-- Savings -->
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md hover:scale-105 transition duration-300 ease-in-out">
<h3 class="text-[#e0e0e0] font-semibold mt-1 sm:mt-2 text-sm sm:text-base">SAVINGS</h3>
<p class="text-[#00b4d8] text-base sm:text-xl" id="savingsAmount">â‚¬0.00</p>
</div>
<!-- Credit -->
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md hover:scale-105 transition duration-300 ease-in-out">
<svg class="h-6 w-6 text-blue-400 mb-1" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M4 7h16M4 11h16M4 15h16M4 19h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<h3 class="text-[#e0e0e0] font-semibold text-sm sm:text-base">Credit</h3>
<p class="text-[#00b4d8] text-base sm:text-xl" id="creditAmount">â‚¬0.00</p>
</div>
</div>
<!-- Quick Actions -->
<div class="bg-[#1f2937] p-3 sm:p-5 rounded-lg sm:rounded-2xl drop-shadow-md border border-[#2d3748]/50">
<h2 class="text-white text-lg sm:text-xl font-semibold px-2 sm:px-4 mb-3 sm:mb-4">Quick Actions</h2>
<!-- Primary Actions -->
<div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 px-2 sm:px-4 mb-4 sm:mb-5">
<div>
<a aria-label="Transfer Money" class="nav-link block w-full h-full" data-page="transfers" href="#">
<div class="flex items-center justify-center bg-gradient-to-r from-[#00b4d8] to-[#00d4ff] text-white rounded-lg sm:rounded-xl p-4 sm:p-5 shadow-lg hover:scale-102 transition duration-200 ease-in-out gradient-border focus:outline-none focus:ring-2 focus:ring-[#00d4ff] min-w-0">
<svg class="h-6 w-6 mr-2 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2m-4-4l4-4m0 0l-4-4m4 4H3" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<span class="text-sm sm:text-base font-bold">Transfers</span>
</div>
</a>
</div>
<div>
<a aria-label="Pay Bills" class="block w-full h-full" href="pay-bills.html">
<div class="flex items-center justify-center bg-gradient-to-r from-[#00b4d8] to-[#00d4ff] text-white rounded-lg sm:rounded-xl p-4 sm:p-5 shadow-lg hover:scale-102 transition duration-200 ease-in-out gradient-border focus:outline-none focus:ring-2 focus:ring-[#00d4ff] min-w-0">
<svg class="h-6 w-6 mr-2 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M9 12h6m-6 4h6M4 6h16M4 10h16M4 14h16M4 18h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<span class="text-sm sm:text-base font-bold">Pay Bills</span>
</div>
</a>
</div>
</div>
<!-- Divider -->
<div class="border-t border-[#2d3748]/50 mx-2 sm:mx-4 mb-3 sm:mb-4"></div>
<!-- Secondary Actions -->
<div class="grid grid-cols-3 gap-2 sm:gap-3 px-2 sm:px-4 animate-fade-in">
<!-- Loans -->
<div>
<a aria-label="Apply for Mortgage" class="block w-full h-full" href="mortgageds.html">
<div class="flex flex-col items-center justify-center bg-[#374151] text-[#d1d5db] rounded-lg sm:rounded-xl p-2 sm:p-3 shadow hover:bg-[#4b5563] transition duration-200 min-w-0 min-h-[80px] focus:outline-none focus:ring-2 focus:ring-[#00b4d8]">
<svg class="h-6 w-6 text-purple-400" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M3 10l9-7 9 7v10a2 2 0 01-2 2h-4m-6 0H5a2 2 0 01-2-2V10z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<span class="mt-1 text-xs sm:text-sm text-center">Loans</span>
</div>
</a>
</div>
<!-- Add Beneficiary -->
<div>
<a aria-label="Add Beneficiary" class="block w-full h-full" href="add-beneficiary.html">
<div class="flex flex-col items-center justify-center bg-[#374151] text-[#d1d5db] rounded-lg sm:rounded-xl p-2 sm:p-3 shadow hover:bg-[#4b5563] transition duration-200 min-w-0 min-h-[80px] focus:outline-none focus:ring-2 focus:ring-[#00b4d8]">
<svg class="h-6 w-6 text-violet-400" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M5.121 17.804A9.978 9.978 0 0112 15c2.486 0 4.746.894 6.495 2.384M15 11a3 3 0 11-6 0 3 3 0 016 0z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<span class="mt-1 text-xs sm:text-sm text-center">Add Beneficiary</span>
</div>
</a>
</div>
<!-- Check Deposits -->
<div>
<a aria-label="Check Deposits" class="block w-full h-full" href="check.html">
<div class="flex flex-col items-center justify-center bg-[#374151] text-[#d1d5db] rounded-lg sm:rounded-xl p-2 sm:p-3 shadow hover:bg-[#4b5563] transition duration-200 min-w-0 min-h-[80px] focus:outline-none focus:ring-2 focus:ring-[#00b4d8]">
<svg class="h-6 w-6 text-yellow-300" fill="none" stroke="currentColor" viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
<path d="M3 10l9-7 9 7M4 10v10a1 1 0 001 1h3m10-11v11a1 1 0 001 1h3m-7-4h4m-4-4h4m-4-4h4M4 22h16" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path>
</svg>
<span class="mt-1 text-xs sm:text-sm text-center">Check Deposits</span>
</div>
</a>
</div>
</div>
</div>
<!-- Spending Overview -->
<div class="bg-[#1f2937] p-3 sm:p-5 rounded-lg sm:rounded-2xl drop-shadow-md chart-container animate-fade-in">
<h2 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-2 sm:mb-4">Spending Overview</h2>
<div class="w-full h-32 sm:h-60 md:max-h-80">
<canvas id="spending-chart"></canvas>
</div>
<a aria-label="View Spending Details" class="block text-sm text-[#00b4d8] hover:text-[#00d4ff] mt-2 sm:mt-3 px-2 sm:px-4 text-center" href="down.html">View Details</a>
</div>
</div>
</div>
<!-- Accounts Page -->
<div class="page hidden" id="accounts-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Accounts</h1>
<div class="space-y-2 sm:space-y-6" x-data="{ loading: false }">
<div class="grid grid-cols-1 gap-2 sm:gap-4" x-show="loading">
<div class="skeleton h-24 sm:h-32"></div>
<div class="skeleton h-24 sm:h-32"></div>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4" x-show="!loading">
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md hover:scale-105 transition duration-300 ease-in-out">
<h3 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-1 sm:mb-2">Checking Account</h3>
<p class="text-[#bbb] flex items-center gap-1 sm:gap-2 text-sm sm:text-base">ğŸ‡§ğŸ‡ª IBAN: BE68 5390 0754 7034</p>
<p class="text-[#bbb] text-sm sm:text-base">Created: 2024-01-15</p>
<span class="bg-green-500/20 text-green-400 px-1 sm:px-2 py-1 rounded text-xs sm:text-sm mt-1 sm:mt-2 inline-block">Active</span>
</div>
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md hover:scale-105 transition duration-300 ease-in-out">
<h3 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-1 sm:mb-2">Savings Account</h3>
<p class="text-[#bbb] flex items-center gap-1 sm:gap-2 text-sm sm:text-base">ğŸ‡³ğŸ‡± IBAN: NL91 ABNA 0417 1643 00</p>
<p class="text-[#bbb] text-sm sm:text-base">Created: 2023-06-20</p>
<span class="bg-green-500/20 text-green-400 px-1 sm:px-2 py-1 rounded text-xs sm:text-sm mt-1 sm:mt-2 inline-block">Active</span>
</div>
</div>
</div>
</div>

&lt;<!-- Transfers Page -->
<div class="page hidden" id="transfers-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Local Transfers (Europe)</h1>
<div class="flex justify-center w-full">
<form class="bg-[#1f2937]/50 backdrop-blur-md p-4 sm:p-6 rounded-lg sm:rounded-2xl shadow-md space-y-4 w-full max-w-md" id="transfer-form">
<!-- Recipient Name -->
<div>
<label class="block text-sm text-[#e0e0e0]" for="recipient-name">Recipient Name</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="recipient-name" placeholder="e.g. Emma Dupont" required="" type="text"/>
</div>
<!-- SWIFT/BIC -->
<div>
<label class="block text-sm text-[#e0e0e0]" for="swift">SWIFT/BIC</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="swift" placeholder="e.g. BBRUBEBB" required="" type="text"/>
</div>
<!-- Amount -->
<div>
<label class="block text-sm text-[#e0e0e0]" for="amount">Amount (â‚¬)</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="amount" min="0.01" placeholder="e.g. 2500" required="" step="0.01" type="number"/>
</div>
<!-- IBAN (Optional) -->
<div>
<label class="block text-sm text-[#e0e0e0]" for="iban">IBAN (optional)</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="iban" placeholder="e.g. BE68 5390 0754 7034" type="text"/>
</div>
<!-- Reference -->
<div>
<label class="block text-sm text-[#e0e0e0]" for="reference">Reference</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="reference" placeholder="e.g. Invoice #2349" type="text"/>
</div>
<!-- OTP Section (hidden initially) -->
<div class="hidden" id="transferOtpSection">
<label class="block text-sm text-[#e0e0e0]" for="transfer-otp">OTP</label>
<input class="w-full bg-[#1a1a1a]/50 text-[#e0e0e0] border border-[#444] rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="transfer-otp" name="otp" placeholder="Enter OTP sent to your email" type="text"/>
</div>
<!-- Submit Button -->
<button class="bg-[#00b4d8] text-white w-full rounded-lg px-4 py-2 text-sm flex items-center justify-center hover:bg-[#00b4d8]/90 transition" id="submit-transfer" type="submit">
<span id="submitText">Send Now</span>
<svg class="hidden animate-spin h-4 w-4 ml-2 text-white" id="submitSpinner" viewbox="0 0 24 24">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
<path class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" fill="currentColor"></path>
</svg>
</button>
</form>
</div>
</div>
<!-- Transactions Page -->
<div class="page hidden" id="transactions-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Transactions</h1>
<div class="space-y-2 sm:space-y-6" x-data="{ loading: false }">
<div class="flex flex-col sm:flex-row justify-between items-center mb-1 sm:mb-4 gap-2">
<h2 class="text-lg sm:text-xl font-semibold text-[#e0e0e0]">Past Transactions</h2>
<select class="bg-[#3a3a3a] text-[#e0e0e0] border border-[#00b4d8] rounded-lg px-1 sm:px-3 py-1 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8] w-full sm:w-auto" id="transaction-filter">
<option value="7">Last 7 Days</option>
<option value="30">Last 30 Days</option>
<option value="90">Last 90 Days</option>
<option value="all">All</option>
</select>
<button class="bg-red-600 hover:bg-red-700 text-white text-sm sm:text-base px-3 py-1 rounded-lg">Clear All</button>
</div>
<div class="space-y-1 sm:space-y-2" x-show="loading">
<div class="skeleton h-6 sm:h-8"></div>
<div class="skeleton h-6 sm:h-8"></div>
<div class="skeleton h-6 sm:h-8"></div>
</div>
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md" x-show="!loading">
<table class="w-full text-left">
<thead>
<tr class="text-[#bbb]">
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Date</th>
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Recipient</th>
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Amount</th>
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Status</th>
</tr>
</thead>
<tbody id="transactions-table">
<!-- Populated dynamically -->
</tbody>
</table>
</div>
</div>
</div>
<!-- Analytics Page -->
<div class="page hidden" id="analytics-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Analytics</h1>
<div class="space-y-2 sm:space-y-6" x-data="{ loading: false }">
<div class="grid grid-cols-1 gap-2 sm:gap-4" x-show="loading">
<div class="skeleton h-32 sm:h-60 md:h-80"></div>
<div class="skeleton h-32 sm:h-60 md:h-80"></div>
</div>
<div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4" x-show="!loading">
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md chart-container">
<h2 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-1 sm:mb-4">Monthly Spending</h2>
<div class="w-full h-32 sm:h-60 md:max-h-80">
<canvas id="monthly-spending-chart"></canvas>
</div>
</div>
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md chart-container">
<h2 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-1 sm:mb-4">Spending by Category</h2>
<div class="w-full h-32 sm:h-60 md:max-h-80">
<canvas id="category-spending-chart"></canvas>
</div>
</div>
</div>
</div>
</div>
<!-- Security Page -->
<div class="page hidden" id="security-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Security</h1>
<div class="flex justify-center w-full">
<div class="space-y-2 sm:space-y-6 max-w-xs sm:max-w-md w-full" x-data="{ loading: false }">
<div class="bg-[#1f2937] p-2 sm:p-4 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md space-y-2 sm:space-y-4">
<div class="flex items-center justify-between" x-data="{ checked: false }">
<label class="text-[#e0e0e0] text-sm sm:text-base">Enable 2FA</label>
<input :class="{ 'ring-2 ring-[#00b4d8]': checked }" class="bg-[#1a1a1a] border border-[#444] rounded focus:ring-[#00b4d8] transition duration-300" id="enable-2fa" type="checkbox" x-model="checked"/>
</div>
<div class="flex items-center justify-between" x-data="{ checked: true }">
<label class="text-[#e0e0e0] text-sm sm:text-base">Show Last Login</label>
<input :class="{ 'ring-2 ring-[#00b4d8]': checked }" class="bg-[#1a1a1a] border border-[#444] rounded focus:ring-[#00b4d8] transition duration-300" id="show-last-login" type="checkbox" x-model="checked"/>
</div>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base hover:opacity-90 transition duration-300 ease-in-out" id="change-password" type="button">Change Password</button>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base hover:opacity-90 transition duration-300 ease-in-out" id="verify-identity" type="button">Verify Identity</button>
</div>
<div class="space-y-1 sm:space-y-2" x-show="loading">
<div class="skeleton h-6 sm:h-8"></div>
<div class="skeleton h-6 sm:h-8"></div>
</div>
<div class="bg-[#1f2937] p-2 sm:p-4 rounded-lg sm:rounded-2xl drop-shadow-md" x-show="!loading">
<h2 class="text-lg sm:text-xl font-semibold text-[#e0e0e0] mb-1 sm:mb-4">Login History</h2>
<table class="w-full text-left">
<thead>
<tr class="text-[#bbb]">
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Date</th>
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Device</th>
<th class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">IP Address</th>
</tr>
</thead>
<tbody>
<tr class="border-t border-[#444]">
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">2025-07-02 15:20</td>
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Chrome (Windows)</td>
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">192.168.1.1</td>
</tr>
<tr class="border-t border-[#444]">
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">2025-06-30 09:15</td>
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">Safari (iPhone)</td>
<td class="p-1 sm:p-2 text-xs sm:text-sm sm:text-base">192.168.1.2</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>

            &lt;<!-- Settings Page -->
<div class="page hidden" id="settings-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Settings</h1>
<div class="flex justify-center w-full">
<form action="/settings" class="bg-[#1f2937] p-2 sm:p-4 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md space-y-2 sm:space-y-4 w-full max-w-xs sm:max-w-md" id="settings-form" method="POST">
<div>
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="full-name">Full Name</label>
<input class="w-full bg-[#1a1a1a] border border-[#444] text-[#e0e0e0] rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="full-name" name="full_name" placeholder="Enter full name" type="text" value=""/>
</div>
<div>
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="email">Email</label>
<input class="w-full bg-[#1a1a1a] border border-[#444] text-[#e0e0e0] rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="email" name="email" placeholder="Enter email" type="email" value=""/>
</div>
<div>
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="phone">Phone</label>
<input class="w-full bg-[#1a1a1a] border border-[#444] text-[#e0e0e0] rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="phone" name="phone" placeholder="+44 123 456 7890" type="tel" value=""/>
</div>
<div>
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="language">Language</label>
<select class="w-full bg-[#1a1a1a] border border-[#444] text-[#e0e0e0] rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="language" name="language">
<option value="en">English</option>
<option value="fr">French</option>
<option value="de">German</option>
</select>
</div>
<div>
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="timezone">Time Zone</label>
<select class="w-full bg-[#1a1a1a] border border-[#444] text-[#e0e0e0] rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="timezone" name="timezone">
<option value="UTC">UTC</option>
<option value="CET">CET (UTC+1)</option>
</select>
</div>
<a class="w-full bg-[#00b4d8] text-white text-center rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base hover:opacity-90 transition duration-300 ease-in-out block" data-page="logout" href="#">ğŸšª Logout</a>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base hover:opacity-90 transition duration-300 ease-in-out" type="submit">Save Changes</button>
</form>
</div>
</div>
<!-- Logout Page -->
<div class="page hidden" id="logout-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Logout</h1>
<div class="flex justify-center w-full">
<div class="bg-[#1f2937] p-2 sm:p-4 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md max-w-xs sm:max-w-md w-full">
<p class="text-[#e0e0e0] mb-1 sm:mb-4 text-sm sm:text-base" id="logout-message">Are you sure you want to log out</p>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-2 sm:px-4 py-1 sm:py-2 text-sm sm:text-base hover:opacity-90 transition duration-300 ease-in-out" id="confirm-logout">Confirm Logout</button>
</div>
</div>
</div>
<!-- Buy Crypto Page -->
<div class="page hidden" id="buy-crypto-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Buy Crypto</h1>
<form action="down.html" class="bg-[#1f2937]/50 backdrop-blur-md p-2 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md space-y-4 sm:space-y-6 w-full max-w-xs sm:max-w-md" id="buy-crypto-form" method="get">
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="crypto-amount">Amount (â‚¬)</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="crypto-amount" min="0.01" name="amount" placeholder="Enter amount" required="" step="0.01" type="number"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">â‚¬</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="crypto-currency">Currency</label>
<select class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="crypto-currency" name="currency">
<option value="BTC">Bitcoin (BTC)</option>
<option value="ETH">Ethereum (ETH)</option>
</select>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300">ğŸ’°</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="wallet-address">Wallet Address (Optional)</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="wallet-address" name="wallet_address" placeholder="Enter wallet address" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ“</span>
</div>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base hover:bg-[#00b4d8]/90 transition-all flex items-center justify-center gradient-border" id="submit-crypto" type="submit">
<span id="submit-text">Buy Now</span>
<svg class="hidden animate-spin h-3 sm:h-4 w-3 sm:w-4 mr-1 sm:mr-2 text-white" id="submit-spinner" viewbox="0 0 24 24">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
<path class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" fill="currentColor"></path>
</svg>
</button>
<div class="hidden text-center text-green-400" id="confirmation">
<p>Transaction Successful!</p>
<p>Tx Hash: <span id="tx-hash"></span></p>
</div>
</form>
</div>
<!-- Pay Bills Page -->
<div class="page hidden" id="pay-bills-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Pay Bills</h1>
<form action="down.html" class="bg-[#1f2937]/50 backdrop-blur-md p-2 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md space-y-4 sm:space-y-6 w-full max-w-xs sm:max-w-md" id="pay-bills-form" method="get">
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="biller-name">Biller Name</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="biller-name" name="biller_name" placeholder="Enter biller name" required="" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ¢</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="category">Category</label>
<select class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="category" name="category">
<option value="utilities">Utilities</option>
<option value="internet">Internet</option>
<option value="rent">Rent</option>
</select>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300">ğŸ“‹</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="bill-amount">Amount (â‚¬)</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="bill-amount" min="0.01" name="amount" placeholder="Enter amount" required="" step="0.01" type="number"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">â‚¬</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="description">Description (Optional)</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="description" name="description" placeholder="Enter description" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ“</span>
</div>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base hover:bg-[#00b4d8]/90 transition-all flex items-center justify-center gradient-border" id="submit-bill" type="submit">
<span id="submit-text">Pay Now</span>
<svg class="hidden animate-spin h-3 sm:h-4 w-3 sm:w-4 mr-1 sm:mr-2 text-white" id="submit-spinner" viewbox="0 0 24 24">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
<path class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" fill="currentColor"></path>
</svg>
</button>
<div class="hidden text-center text-green-400" id="confirmation">
<p>Payment Successful!</p>
</div>
</form>
</div>
<!-- Add Beneficiary Page -->
<div class="page hidden" id="add-beneficiary-page">
<h1 class="text-2xl sm:text-3xl font-bold text-[#e0e0e0] mb-2 sm:mb-6">Add Beneficiary</h1>
<form action="down.html" class="bg-[#1f2937]/50 backdrop-blur-md p-2 sm:p-6 rounded-lg sm:rounded-2xl drop-shadow-md space-y-4 sm:space-y-6 w-full max-w-xs sm:max-w-md" id="addBeneficiaryForm" method="get">
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="full-name">Full Name</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="full-name" name="full_name" placeholder="Enter full name" required="" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ‘¤</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="iban">IBAN</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="iban" name="iban" placeholder="e.g., BE68 5390 0754 7034" required="" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ¦</span>
</div>
<div class="relative">
<label class="block text-[#e0e0e0] mb-1 sm:mb-2 text-sm sm:text-base" for="bank-name">Bank Name</label>
<input class="w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8]" id="bank-name" name="bank_name" placeholder="Enter bank name" required="" type="text"/>
<span class="absolute right-3 top-10 text-[#00b4d8] opacity-0 transition-opacity duration-300 focus-within:opacity-100">ğŸ¦</span>
</div>
<button class="w-full bg-[#00b4d8] text-white rounded-lg px-3 sm:px-4 py-2 text-sm sm:text-base hover:bg-[#00b4d8]/90 transition-all flex items-center justify-center gradient-border" id="beneficiaryBtn" type="submit">
<span id="submit-text">Add Beneficiary</span>
<svg class="hidden animate-spin h-3 sm:h-4 w-3 sm:w-4 mr-1 sm:mr-2 text-white" id="submit-spinner" viewbox="0 0 24 24">
<circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
<path class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" fill="currentColor"></path>
</svg>
</button>
<div class="hidden text-center text-green-400" id="confirmation">
<p>Beneficiary Added Successfully!</p>
</div>
</form>
</div>
<!-- Footer -->
<footer class="bg-[#111] text-gray-400 text-xs text-center py-4 mt-auto">
    Â© 2025 Credibe. All rights reserved. | <a href="#">Privacy</a> | <a href="#">Terms</a> | <a href="#">Support</a>
</footer>
<script>
(async () => {
function formatEuro(amount) {
  return `â‚¬${Number(amount).toLocaleString('en-US', {
    minimumFractionDigits: 2,
    maximumFractionDigits: 2
  })}`;
}

    // ğŸ” Check for user token
const token = localStorage.getItem("userToken");
if (!token) {
    alert("You must be logged in to view this page.");
    window.location.href = "login.html";
}

    // Handle window resize to hide mobile menu on desktop
    window.addEventListener('resize', () => {
        if (window.innerWidth >= 768 && mobileMenu && !mobileMenu.classList.contains('closed')) {
            mobileMenu.classList.add('closed');
            mobileMenu.classList.remove('open');
            console.log('Mobile menu hidden on resize to desktop');
        }
    });

    // Page Switching with Skeleton Loader
    const navLinks = document.querySelectorAll('.nav-link');
    const pages = document.querySelectorAll('.page');

    function showPage(pageId) {
        pages.forEach(page => {
            page.classList.add('hidden');
            if (page.__x && page.__x.$data) {
                page.__x.$data.loading = true;
            }
        });

        const activePage = document.getElementById(`${pageId}-page`);
        if (activePage) {
            setTimeout(() => {
                activePage.classList.remove('hidden');
                if (activePage.__x && activePage.__x.$data) {
                    activePage.__x.$data.loading = false;
                }
                if (pageId === 'transactions') {
                    loadTransactions();
                }
            }, 500);
        }

        navLinks.forEach(link => link.classList.remove('bg-[#3a3a3a]', 'text-[#00b4d8]'));
        const activeLink = document.querySelector(`[data-page="${pageId}"]`);
        if (activeLink) activeLink.classList.add('bg-[#3a3a3a]', 'text-[#00b4d8]');

        if (window.innerWidth < 768 && mobileMenu) {
            mobileMenu.classList.add('closed');
            mobileMenu.classList.remove('open');
        }

        console.log(`Switched to page: ${pageId}`);
    }

    navLinks.forEach(link => {
        link.addEventListener('click', (e) => {
            e.preventDefault();
            const pageId = link.getAttribute('data-page');
            showPage(pageId);
        });
    });

    // Charts
    const spendingChartCtx = document.getElementById('spending-chart');
    if (spendingChartCtx) {
        try {
            new Chart(spendingChartCtx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Spending',
                        data: [1200, 1900, 1500, 2200, 1800, 2500],
                        borderColor: '#00b4d8',
                        backgroundColor: 'rgba(0, 180, 216, 0.2)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#00b4d8',
                        pointBorderColor: '#e0e0e0'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, ticks: { color: '#e0e0e0', font: { size: 10 } }, grid: { color: '#444' } },
                        x: { ticks: { color: '#e0e0e0', font: { size: 10 } }, grid: { color: '#444' } }
                    },
                    plugins: { legend: { labels: { color: '#e0e0e0', font: { size: 12 } } } },
                    animation: { duration: 1000, easing: 'easeInOutQuad' }
                }
            });
            console.log('Spending chart initialized');
        } catch (error) {
            console.error('Error initializing spending chart:', error);
        }
    }

    const monthlySpendingChartCtx = document.getElementById('monthly-spending-chart');
    if (monthlySpendingChartCtx) {
        try {
            new Chart(monthlySpendingChartCtx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Monthly Spending',
                        data: [1000, 1500, 1200, 1800, 1600, 2000],
                        backgroundColor: '#00b4d8',
                        borderColor: '#e0e0e0',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: { beginAtZero: true, ticks: { color: '#e0e0e0', font: { size: 10 } }, grid: { color: '#444' } },
                        x: { ticks: { color: '#e0e0e0', font: { size: 10 } }, grid: { color: '#444' } }
                    },
                    plugins: { legend: { labels: { color: '#e0e0e0', font: { size: 12 } } } },
                    animation: { duration: 1000, easing: 'easeInOutQuad' }
                }
            });
            console.log('Monthly spending chart initialized');
        } catch (error) {
            console.error('Error initializing monthly spending chart:', error);
        }
    }

    const categorySpendingChartCtx = document.getElementById('category-spending-chart');
    if (categorySpendingChartCtx) {
        try {
            new Chart(categorySpendingChartCtx.getContext('2d'), {
                type: 'pie',
                data: {
                    labels: ['Groceries', 'Bills', 'Entertainment', 'Travel', 'Other'],
                    datasets: [{
                        data: [30, 25, 20, 15, 10],
                        backgroundColor: ['#00b4d8', '#87ceeb', '#4682b4', '#1e90ff', '#add8e6'],
                        borderColor: '#e0e0e0',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { labels: { color: '#e0e0e0', font: { size: 12 } } } },
                    animation: { duration: 1000, easing: 'easeInOutQuad' }
                }
            });
            console.log('Category spending chart initialized');
        } catch (error) {
            console.error('Error initializing category spending chart:', error);
        }
    }

// Transfer Form
const transferForm = document.getElementById('transfer-form');
const transferOtpSection = document.getElementById('transferOtpSection');
const sendTransferOtpPhone = document.getElementById('send-transfer-otp-phone');
const sendTransferOtpEmail = document.getElementById('send-transfer-otp-email');
const submitTransfer = document.getElementById('submit-transfer');
const submitText = document.getElementById('submitText');
const submitSpinner = document.getElementById('submitSpinner');


if (transferForm) {
    const transferRecipientName = document.getElementById('recipient-name');
    const transferRecipientEmail = document.getElementById('recipient-email');
    const transferRecipientIban = document.getElementById('recipient-iban');

    // Load beneficiaries if available
    if (transferRecipientName && transferRecipientEmail && transferRecipientIban) {
        const beneficiaries = JSON.parse(localStorage.getItem('beneficiaries') || '[]');
        if (beneficiaries.length > 0) {
            const select = document.createElement('select');
            select.id = 'beneficiary-select';
            select.className = 'w-full bg-[#1a1a1a]/50 border border-[#444] text-[#e0e0e0] rounded-lg px-3 py-2 text-sm sm:text-base focus:outline-none focus:ring-2 focus:ring-[#00b4d8] mb-2';
            select.innerHTML = `<option value="">Select a beneficiary</option>` + 
                beneficiaries.map(b => `<option value="${b.email}">${b.fullName} (${b.email}, ${b.iban})</option>`).join('');
            transferRecipientName.parentElement.insertBefore(select, transferRecipientName);
            select.addEventListener('change', () => {
                const selected = beneficiaries.find(b => b.email === select.value);
                transferRecipientName.value = selected ? selected.fullName : '';
                transferRecipientEmail.value = selected ? selected.email : '';
                transferRecipientIban.value = selected ? selected.iban : '';
            });
        }
    }

    // ğŸ”¹ Send Transfer OTP to Your Own Email
    if (sendTransferOtpEmail) {
        sendTransferOtpEmail.addEventListener('click', async () => {
            const userEmailField = document.getElementById('user-email');
            if (!userEmailField) return alert("Your email input is missing.");

            const email = userEmailField.value.trim();
            if (!email) return alert("Please enter your email to receive OTP.");

            console.log('ğŸ§ª Sending OTP request:', { email, timestamp: new Date().toISOString() });

            if (transferOtpSection) transferOtpSection.classList.remove('hidden');

            try {
                const res = await fetch('https://credibe-backends.onrender.com/api/transfer/send-direct-otp', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email,
                        type: "transfer"
                    })
                });

                const data = await res.json();
                console.log('ğŸ§ª OTP response:', { status: res.status, data });
                if (!res.ok) throw new Error(data.error || "OTP error");

                alert("OTP sent to your email âœ”ï¸");
            } catch (err) {
                console.error("âŒ OTP send error:", err.message, { email });
                alert(err.message || "Something went wrong.");
            }
        });
    }

    // ğŸ”¹ Submit Transfer (CREDIBE IBAN-ONLY SYSTEM)
  if (transferForm) {
  transferForm.addEventListener('submit', async function (e) {
    e.preventDefault();

    const recipientNameField = document.getElementById('recipient-name');
    const swiftField = document.getElementById('swift');
    const amountField = document.getElementById('amount');
    const ibanField = document.getElementById('iban');
    const referenceField = document.getElementById('reference');
    const otpField = document.getElementById('transfer-otp');

    if (!recipientNameField || !swiftField || !amountField || !referenceField) {
      alert('One or more required fields are missing.');
      return;
    }

    const recipientName = recipientNameField.value.trim();
    const swift = swiftField.value.trim();
    const amount = parseFloat(amountField.value);
    const recipientIban = ibanField?.value.trim() || '';
    const reference = referenceField.value.trim();
    const otp = otpField?.value.trim() || '';

    if (!recipientName || !swift || isNaN(amount)) {
      alert('Please fill all required fields (Name, SWIFT, Amount).');
      return;
    }

    if (!/^[A-Z]{4}[A-Z]{2}[A-Z0-9]{2,5}$/.test(swift)) {
      alert('Invalid SWIFT format (must be 8 or 11 uppercase letters/digits).');
      return;
    }

    if (recipientIban && !/^[A-Z]{2}\d{2}[A-Z0-9]{4,30}$/.test(recipientIban.replace(/\s/g, ''))) {
      alert('Invalid IBAN. Must be valid format or left blank.');
      return;
    }

    if (amount <= 0 || !Number.isFinite(amount)) {
      alert('Amount must be greater than 0.');
      return;
    }

    // âœ… Step 1: Send OTP if hidden
    if (!otp && transferOtpSection && transferOtpSection.classList.contains('hidden')) {
      try {
        const res = await fetch('https://credibe-backends.onrender.com/api/transfer/send-otp', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${localStorage.getItem('userToken')}`
          },
          body: JSON.stringify({ type: 'transfer' })
        });

        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'OTP send failed');

        transferOtpSection.classList.remove('hidden');
        alert('OTP sent to your registered email. Please enter it to continue.');
      } catch (err) {
        alert(err.message || 'Failed to send OTP.');
      }

      return;
    }

    // âœ… Step 2: Must include OTP
    if (!otp) {
      alert('Please enter the OTP sent to your email.');
      return;
    }

    // UI loading
    submitText.textContent = 'Processing...';
    submitSpinner.classList.remove('hidden');
    submitTransfer.disabled = true;

    try {
      const payload = {
        recipient: recipientName,
        swift,
        toIban: recipientIban || undefined,
        amount,
        note: reference,
        otp
      };

      const res = await fetch('https://credibe-backends.onrender.com/api/transfer/initiate', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${localStorage.getItem('userToken')}`
        },
        body: JSON.stringify(payload)
      });

      const data = await res.json();

      if (res.ok && data.transactionId) {
        alert('Transfer submitted successfully! (Pending approval)');
        transferForm.reset();
        transferOtpSection.classList.add('hidden');

        localStorage.setItem('pendingTransfer', JSON.stringify({
          recipientName,
          swift,
          recipientIban,
          amount,
          note: reference,
          transferId: data.transactionId
        }));

        window.location.href = 'transfer-pending.html';
      } else {
        alert(data.error || `Transfer failed. Status: ${res.status}`);
      }
    } catch (error) {
      console.error('âŒ Transfer error:', error.message);
      alert('Something went wrong. Please try again.');
    } finally {
      submitText.textContent = 'Send Now';
      submitSpinner.classList.add('hidden');
      submitTransfer.disabled = false;
    }
  });
}
}
// ğŸ¯ Transaction Filter Dropdown
const transactionFilter = document.getElementById('transaction-filter');
if (transactionFilter) {
  transactionFilter.addEventListener('change', (e) => {
    const days = e.target.value || 'all';
    console.log('ğŸ§ª Filter selected:', days);
    loadTransactions(days);
    alert(`Filtered transactions for: ${days === 'all' ? 'All time' : `${days} days`}`);
  });
}

function generateStaticFakeTransactions() {
  const cached = localStorage.getItem('fakeTransactions');
  const freezeCap = new Date("2025-03-26T23:59:59");

  // ğŸ§  Check if cache exists AND is valid
  if (cached) {
    try {
      const parsed = JSON.parse(cached);

      const isValid = parsed.every(txn => {
        const d = new Date(txn.date);
        return txn.recipient && typeof txn.recipient === 'string' && d <= freezeCap;
      });

      if (isValid) return parsed;

      // ğŸ§¨ If invalid (e.g., future dates or unknowns) â€” delete it
      console.warn("ğŸš« Old or invalid fake txns found â€” clearing...");
      localStorage.removeItem('fakeTransactions');

    } catch (err) {
      console.warn("âš ï¸ Failed to parse fake txns â€” clearing...");
      localStorage.removeItem('fakeTransactions');
    }
  }

  // âœ… If no valid cache, generate new safe ones
  const names = [
    "ING Bank", "BNP Paribas", "Belfius", "KBC Group", "ABN AMRO",
    "Delhaize", "Albert Heijn", "Carrefour", "Colruyt", "Lidl Belgium",
    "Lucas Maes", "Emma Dupont", "Louis Vandamme", "Sophie Martin", "Julie Janssens",
    "Coolblue", "Vanden Borre", "Bol.com", "MediaMarkt", "Decathlon",
    "Zalando", "H&M", "IKEA Belgium", "JBC", "Tommy Hilfiger",
    "Esso", "TotalEnergies", "Q8 Belgium", "NMBS/SNCB", "De Lijn",
    "Stib-Mivb", "Bpost", "Telenet", "Proximus", "Orange Belgium",
    "NestlÃ©", "Unilever", "Coca-Cola EU", "Heineken", "Jupiler",
    "Dries Mertens", "Koen Wauters", "Noa Vermeer", "Charlotte Peeters", "Sarah De Smet",
    "Jens Van Damme", "Tom Vercauteren", "Kevin Leroy", "Lotte Nys", "Maxime Deneve"
  ];

  const txns = [];
  const fixedDate = new Date("2025-03-26T00:00:00Z");

  for (let i = 0; i < 100; i++) {
    const nameIndex = i % names.length;
    txns.push({
      _id: `fake-${i}`,
      date: fixedDate.toISOString(),
      recipient: names[nameIndex],
      amount: Math.floor(Math.random() * 900 + 100),
      status: "approved"
    });
  }

  localStorage.setItem('fakeTransactions', JSON.stringify(txns));
  return txns;
}


/// â³ Filter transactions strictly by date
function filterTxnsByDays(txns, days) {
  const now = new Date();
  const today = new Date();
  today.setHours(0, 0, 0, 0); // midnight today
  const freezeCap = new Date("2025-03-26T23:59:59"); // legacy cap

  return txns.filter(t => {
    const rawDate = new Date(t.date || t.createdAt);
    if (isNaN(rawDate.getTime()) || rawDate > now) return false;

    // âœ… Keep all transactions that existed before or on March 26
    if (rawDate <= freezeCap) return true;

    // âœ… Only allow new txns created today or after
    if (rawDate >= today) {
      const daysDiff = (now - rawDate) / (1000 * 60 * 60 * 24);
      return days === 'all' || daysDiff <= parseInt(days);
    }

    // âŒ Reject any injected old-looking ones created after March 26 but before today
    return false;
  });
}

// ğŸ“¦ Load and display all transactions
async function loadTransactions(days = 'all') {
  const tableBody = document.getElementById('transactions-table');
  if (!tableBody) return;

  tableBody.innerHTML = '<tr><td colspan="4" class="p-2 text-center">Loading...</td></tr>';

  try {
    const userId = localStorage.getItem("userId") || "";
    const url = `https://credibe-backends.onrender.com/api/user/transactions/${userId}${days !== 'all' ? `?days=${days}` : ''}`;

    const res = await fetch(url, {
      headers: {
        Authorization: `Bearer ${localStorage.getItem("userToken")}`
      }
    });

    const transactions = res.ok ? await res.json() : [];
    console.log("ğŸ”¥ Raw transactions:", transactions);

    // ğŸ§  Apply filter by days
    const filtered = filterTxnsByDays(transactions, days);

    // ğŸ§  Sort newest â†’ oldest
    const sortedTxns = filtered.sort((a, b) => {
      const aDate = new Date(a.date || a.createdAt);
      const bDate = new Date(b.date || b.createdAt);
      return bDate - aDate;
    });

    // ğŸ§¼ No results
    if (sortedTxns.length === 0) {
      tableBody.innerHTML = '<tr><td colspan="4" class="p-2 text-center text-gray-500">No transactions found.</td></tr>';
      return;
    }

    // ğŸ§¾ Render each row
    tableBody.innerHTML = sortedTxns.map(t => {
      const rawDate = t.date || t.createdAt;
      const txnDate = new Date(rawDate);
      const formattedDate = !isNaN(txnDate.getTime())
        ? txnDate.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' })
        : 'Unknown';

      const recipient = t.recipient || 'Unknown';
      const amount = typeof t.amount === "number" ? `${t.amount} â‚¬` : 'Unknown';

      const statusRaw = t.status || 'pending';
      let statusLabel = 'â“ Unknown';
      let statusColor = 'text-gray-400';

      if (statusRaw === 'pending') {
        statusLabel = 'ğŸ•“ Pending';
        statusColor = 'text-yellow-500';
      } else if (statusRaw === 'approved') {
        statusLabel = 'âœ… Approved';
        statusColor = 'text-green-500';
      } else if (statusRaw === 'rejected') {
        statusLabel = 'âŒ Rejected';
        statusColor = 'text-red-500';
      }

      return `
        <tr class="border-t border-[#444]">
          <td class="p-1 sm:p-2 text-xs sm:text-sm">${formattedDate}</td>
          <td class="p-1 sm:p-2 text-xs sm:text-sm">${recipient}</td>
          <td class="p-1 sm:p-2 text-xs sm:text-sm">${amount}</td>
          <td class="p-1 sm:p-2 text-xs sm:text-sm ${statusColor}">${statusLabel}</td>
        </tr>`;
    }).join('');

  } catch (error) {
    console.error("âŒ Transaction load error:", error.message);
    tableBody.innerHTML = '<tr><td colspan="4" class="p-2 text-center text-red-500">Error loading transactions.</td></tr>';
  }
}

    // Security Handlers
    const changePassword = document.getElementById('change-password');
    const verifyIdentity = document.getElementById('verify-identity');
    if (changePassword) {
        changePassword.addEventListener('click', () => {
            console.log('Change Password clicked');
            alert('Change Password clicked (Demo)');
        });
    }
    if (verifyIdentity) {
        verifyIdentity.addEventListener('click', () => {
            console.log('Verify Identity clicked');
            alert('Verify Identity clicked (Demo)');
        });
    }

   // âœ… Ensure user is logged in
if (!token) {
    alert("You must be logged in to view this page.");
    window.location.href = "login.html";
}


// âœ… Reusable function to fetch user data
async function fetchUserData() {
  try {
    const res = await fetch("https://credibe-backends.onrender.com/api/user/me", {
      method: "GET",
      headers: {
        "Authorization": `Bearer ${token}`,
        "Content-Type": "application/json"
      }
    });

    const data = await res.json();

    if (!res.ok) {
      console.error("âŒ Failed to fetch user data:", data.error);
      return null;
    }

    return data;
  } catch (err) {
    console.error("ğŸ”¥ Error fetching user data:", err);
    return null;
  }
}

// âœ… Populate form + dashboard
(async () => {
  const data = await fetchUserData();
  if (!data) return;

  // âš™ï¸ Prefill settings
  if (document.getElementById("full-name")) {
    document.getElementById("full-name").value = data.name || "";
    document.getElementById("email").value = data.email || "";
    document.getElementById("phone").value = data.phone || "";
  }

  // ğŸ‘‹ Dashboard welcome message
  const welcomeTag = document.getElementById("welcome-user");
  if (welcomeTag) {
    welcomeTag.textContent = `Welcome, ${data.name || "User"}`;
  }

  // ğŸ’¶ Dashboard balance
  const balanceTag = document.getElementById("user-balance");
  if (balanceTag) {
    balanceTag.textContent = `â‚¬${data.balance ?? 0}`;
  }
})();

// âœ… Submit settings form
const settingsForm = document.getElementById('settings-form');
if (settingsForm) {
  settingsForm.addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('full-name').value;
    const email = document.getElementById('email').value;
    const phone = document.getElementById('phone').value;

    const submitButton = settingsForm.querySelector('button[type="submit"]');
    submitButton.disabled = true;

    try {
      const res = await fetch('https://credibe-backends.onrender.com/api/settings/update', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${token}`
        },
        body: JSON.stringify({ name, email, phone })
      });

      const response = await res.json();

      if (res.ok) {
        alert('âœ… Settings updated successfully!');
        console.log('Updated settings:', { name, email, phone });

        // ğŸ”„ Refresh values
        await (async () => {
          const newData = await fetchUserData();
          if (!newData) return;
          document.getElementById("full-name").value = newData.name || "";
          document.getElementById("email").value = newData.email || "";
          document.getElementById("phone").value = newData.phone || "";
        })();

      } else {
        alert(response.error || 'âŒ Failed to update settings.');
      }

    } catch (err) {
      console.error('âš ï¸ Settings update error:', err);
      alert('Something went wrong. Try again.');
    } finally {
      submitButton.disabled = false;
    }
  });
}



    // Logout Handler
    const confirmLogout = document.getElementById('confirm-logout');
    if (confirmLogout) {
        confirmLogout.addEventListener('click', () => {
            localStorage.removeItem('userToken');
            window.location.href = 'login.html';
            console.log('User logged out');
        });
    }

    // Initialize Application
    document.addEventListener("DOMContentLoaded", () => {
        showPage('dashboard');
        console.log("Application initialized");
        // Fade in effect for pages
        const pages = document.querySelectorAll('.page');
        pages.forEach(page => page.classList.add('fade-in', 'visible'));

        // Initialize charts on page load if present
        if (document.getElementById('spending-chart')) {
            loadTransactions(); // Load transactions for dashboard
        }
    });

    // Ensure script execution completes
   
  async function loadUserDashboard() {
  const token = localStorage.getItem("userToken");
  if (!token) {
    alert("You must be logged in to view this page.");
    window.location.href = "login.html";
    return;
  }

  try {
    const res = await fetch("https://credibe-backends.onrender.com/api/user/me", {
      headers: {
        Authorization: `Bearer ${token}`
      }
    });

    if (!res.ok) {
      const errorData = await res.json();
      console.error("âŒ Failed to load user data:", errorData);
      throw new Error(errorData.error || "Unknown error");
    }

    const data = await res.json();

    // ğŸ” Update the user dashboard values
 document.getElementById("totalBalance").textContent = `â‚¬${data.balance.toLocaleString()}`;
document.getElementById("savingsAmount").textContent = `â‚¬${data.savings.toLocaleString()}`;
document.getElementById("creditAmount").textContent = `â‚¬${data.credits.toLocaleString()}`;
  } catch (err) {
    console.error("âŒ Dashboard load error:", err.message);
  }
}

window.onload = loadUserDashboard;
})();
</script>
<script>
document.addEventListener("DOMContentLoaded", async () => {
  try {
    const token = localStorage.getItem("userToken");
    const res = await fetch("https://credibe-backends.onrender.com/api/user/profile", {
      headers: { Authorization: `Bearer ${token}` }
    });
    const data = await res.json();
    const checking = data.accounts?.checking || {};
    const savings = data.accounts?.savings || {};
    document.getElementById("checking-iban").textContent = checking.iban || "â€”";
    document.getElementById("checking-date").textContent = checking.createdAt ? new Date(checking.createdAt).toLocaleDateString() : "â€”";
    document.getElementById("savings-iban").textContent = savings.iban || "â€”";
    document.getElementById("savings-date").textContent = savings.createdAt ? new Date(savings.createdAt).toLocaleDateString() : "â€”";
  } catch (e) {
    console.error("IBAN Fetch Error:", e);
  }
});
</script>
<script>
document.getElementById("buy-crypto-form")?.addEventListener("submit", async (e) => {
  e.preventDefault();
  const token = localStorage.getItem("userToken");
  const amount = document.getElementById("crypto-amount").value;
  const currency = document.getElementById("crypto-currency").value;
  const wallet = document.getElementById("crypto-wallet").value;

  try {
    const res = await fetch("https://credibe-backends.onrender.com/api/transfer/crypto", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`
      },
      body: JSON.stringify({ amount, currency, wallet })
    });

    if (res.ok) {
      alert("âœ… Your crypto request has been processed. Await admin approval.");
      document.getElementById("buy-crypto-form").reset();
    } else {
      const error = await res.json();
      alert("âŒ Error: " + error.message);
    }
  } catch (err) {
    alert("âŒ Failed to send request.");
  }
});
</script>
<script>
document.getElementById("pay-bills-form")?.addEventListener("submit", async (e) => {
  e.preventDefault();
  const token = localStorage.getItem("userToken");
  const biller = document.getElementById("biller-name").value;
  const category = document.getElementById("category").value;
  const account = document.getElementById("account-number").value;
  const amount = document.getElementById("bill-amount").value;

  try {
    const res = await fetch("https://credibe-backends.onrender.com/api/transfer/bill", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        Authorization: `Bearer ${token}`
      },
      body: JSON.stringify({ biller, category, account, amount })
    });

    if (res.ok) {
      alert("âœ… Your bill request has been processed. Await admin approval.");
      document.getElementById("pay-bills-form").reset();
    } else {
      const error = await res.json();
      alert("âŒ Error: " + error.message);
    }
  } catch (err) {
    alert("âŒ Failed to send request.");
  }
});

  const buyCryptoForm = document.getElementById('buy-crypto-form');
  if (buyCryptoForm) {
    buyCryptoForm.addEventListener('submit', (e) => {
      e.preventDefault();
      window.location.href = 'down.html';
    });
  }

  const payBillsForm = document.getElementById('pay-bills-form');
  if (payBillsForm) {
    payBillsForm.addEventListener('submit', (e) => {
      e.preventDefault();
      window.location.href = 'down.html';
    });
  }

  const addBeneficiaryForm = document.getElementById('addBeneficiaryForm');
  if (addBeneficiaryForm) {
    addBeneficiaryForm.addEventListener('submit', (e) => {
      e.preventDefault();
      window.location.href = 'down.html';
    });
  }
 const menuToggle = document.getElementById("menu-toggle");
const mobileMenu = document.getElementById("mobile-menu");

if (menuToggle && mobileMenu) {
    menuToggle.addEventListener("click", () => {
        mobileMenu.classList.toggle("closed");
        mobileMenu.classList.toggle("open");
    });
}
</script>
</main></div><script>
let userIsBlocked = false;

document.addEventListener("DOMContentLoaded", async () => {
  const token = localStorage.getItem("userToken");

  try {
    const res = await fetch("https://thecredibe.com/api/auth/me", {
      headers: { Authorization: `Bearer ${token}` }
    });
    const data = await res.json();
    userIsBlocked = data?.user?.isBlocked || false;
  } catch (err) {
    console.error("âŒ Failed to check block status:", err);
  }

  bindQuickActions();
});

function bindQuickActions() {
  const buttons = [
    "transferBtn",
    "payBillsBtn",
    "loanBtn",
    "beneficiaryBtn",
    "checkDepositBtn"
  ];

  buttons.forEach(id => {
    const btn = document.getElementById(id);
    if (btn) {
      btn.addEventListener("click", (e) => {
        if (userIsBlocked) {
          e.preventDefault();
          window.location.href = "blocked.html";
        }
      });
    }
  });
}
</script></body>
</html>