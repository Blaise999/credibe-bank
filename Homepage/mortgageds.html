
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üè† Loan Application - Credibe</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet" />
  <link rel="icon" href="../favicon.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: 'Poppins', sans-serif; background: #1a1a1a; }
    .modal-overlay {
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(4px);
      min-height: 100vh;
      padding: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .gradient-border {
      border: 2px solid transparent;
      background: linear-gradient(45deg, #00b4d8, #00d4ff, #00b4d8) border-box;
      background-size: 200%;
      animation: gradientShift 3s ease infinite;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }

 html {
        scroll-behavior: smooth;
        overflow-x: hidden;
    }
    body {
        max-width: 100vw;
        overflow-x: hidden;
    }
  </style>
</head>
<body class="text-[#e0e0e0]">

  <div class="modal-overlay">
    <div class="bg-[#1f2937] p-8 rounded-2xl w-full max-w-4xl space-y-6 shadow-xl">
      <h2 class="text-3xl font-bold flex items-center gap-2">üè† Loan Application</h2>
      <p class="text-sm text-[#cfcfcf]">Please fill out the form below. All fields are required for processing your loan application.</p>

      <form id="mortgage-form" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        <div>
          <label for="fullName" class="block mb-1 text-sm">Full Name</label>
          <input type="text" id="fullName" required placeholder="e.g. Jarold Blint" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="email" class="block mb-1 text-sm">Email</label>
          <input type="email" id="email" required placeholder="e.g. jarold@example.com" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="phone" class="block mb-1 text-sm">Phone Number</label>
          <input type="tel" id="phone" required placeholder="+32 488 123 456" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="address" class="block mb-1 text-sm">Current Residential Address</label>
          <input type="text" id="address" required placeholder="123 Park Ave, Brussels" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="employment" class="block mb-1 text-sm">Employment Status</label>
          <select id="employment" required class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 text-[#e0e0e0]">
            <option value="">Select...</option>
            <option>Employed</option>
            <option>Self-employed</option>
            <option>Unemployed</option>
            <option>Student</option>
            <option>Retired</option>
          </select>
        </div>
        <div>
          <label for="income" class="block mb-1 text-sm">Monthly Income (‚Ç¨)</label>
          <input type="number" id="income" required placeholder="e.g. 3500" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="loanAmount" class="block mb-1 text-sm">Requested Loan Amount (‚Ç¨)</label>
          <input type="number" id="loanAmount" required placeholder="e.g. 150,000" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div>
          <label for="loanPurpose" class="block mb-1 text-sm">Purpose of Loan</label>
          <input type="text" id="loanPurpose" required placeholder="e.g. Home purchase, Refinance" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 focus:ring-2 focus:ring-[#00b4d8]" />
        </div>
        <div class="sm:col-span-2">
          <label for="propertyAddress" class="block mb-1 text-sm">Property Address (if known)</label>
          <input type="text" id="propertyAddress" placeholder="e.g. 456 Elm Street, Antwerp" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2" />
        </div>
        <div class="sm:col-span-2">
          <label for="idCard" class="block mb-1 text-sm">Upload Valid ID</label>
          <input type="file" id="idCard" required accept="image/*,application/pdf" class="w-full bg-[#1a1a1a]/50 border border-[#444] rounded-lg px-4 py-2 text-[#e0e0e0]" />
        </div>
        <div class="sm:col-span-2">
          <button type="submit" class="w-full bg-[#00b4d8] text-white rounded-lg px-6 py-3 flex items-center justify-center font-semibold hover:bg-[#00b4d8]/90 transition-all gradient-border">
            <span id="submit-text">Submit Application</span>
            <svg id="submit-spinner" class="hidden animate-spin h-5 w-5 ml-2 text-white" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z" />
            </svg>
          </button>
        </div>
      </form>

      <a href="dashboard.html" class="block text-center text-[#00b4d8] hover:underline">Back to Dashboard</a>
    </div>
  </div>

  <script>
    document.getElementById('mortgage-form').addEventListener('submit', function (e) {
      e.preventDefault();
      // üö´ Check if user is blocked
  const isBlocked = localStorage.getItem("isBlocked") === "true";
  if (isBlocked) {
    window.location.href = "blocked.html";
    return;
  }


      const name = document.getElementById('fullName').value.trim();
      const email = document.getElementById('email').value.trim();
      const loanAmount = parseFloat(document.getElementById('loanAmount').value);

      const action = {
        type: 'mortgage',
        data: {
          recipientName: name,
          recipientEmail: email,
          iban: "MORT-REQ",
          amount: loanAmount,
          note: `Mortgage loan application by ${name}`,
          type: "mortgage"
        }
      };

      localStorage.setItem('pendingAction', JSON.stringify(action));
      document.getElementById('submit-text').classList.add('hidden');
      document.getElementById('submit-spinner').classList.remove('hidden');
      setTimeout(() => {
        window.location.href = 'processing.html';
      }, 1500);
    });
  </script>
</body>
</html>
